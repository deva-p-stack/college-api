(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))m(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&m(l)}).observe(document,{childList:!0,subtree:!0});function A(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function m(o){if(o.ep)return;o.ep=!0;const r=A(o);fetch(o.href,r)}})();document.addEventListener("DOMContentLoaded",async function(){const g=document.getElementById("district"),y=document.getElementById("search"),A=document.getElementById("search-btn"),m=document.getElementById("state"),o=document.getElementById("con"),r=document.getElementById("institution"),l=document.getElementById("University"),v=document.getElementById("programme"),C="https://indian-colleges-list.vercel.app/api";let s=[];const x=await I();async function I(){try{const t=await fetch(`${C}/institutions/states`);if(!t.ok)throw new Error("Network response was not working");const e=await t.json();return console.log(e.states),e.states}catch(t){console.error("Error fetching data:",t)}}I(),B(x);function B(t){t.forEach(e=>{let n=document.createElement("option");n.textContent=`${e.name}`,n.value=e.name,m.append(n)})}async function S(t){try{const e=`https://indian-colleges-list.vercel.app/api/institutions/states/${t}`,n=await fetch(e);if(!n.ok)throw new Error("Network response was not ok");s=(await n.json()).data,c(s),g.innerHTML="",[...new Set(s.map(a=>a.district))].sort().forEach(a=>{let i=document.createElement("option");i.textContent=a,i.value=a,g.append(i),l.innerHTML="";let T=[...new Set(s.map(h=>h.university))].sort(),M=["NOT APPLICABLE","NONE","None","Self","SELF"];T.filter(h=>!M.includes(h)).forEach(h=>{let L=document.createElement("option");L.textContent=h,L.value=h,l.append(L)})}),v.innerHTML="",[...new Set(s.flatMap(a=>a.programmes.map(i=>i.programme)))].sort().forEach(a=>{let i=document.createElement("option");i.textContent=a,i.value=a,v.append(i)});const p=document.createElement("option");p.textContent="All Districts",p.value="All",p.selected=!0,g.prepend(p);const f=document.createElement("option");f.textContent="All Universities",f.value="All",f.selected=!0,l.prepend(f);const E=document.createElement("option");E.textContent="All Programmes",E.value="All",E.selected=!0,v.prepend(E)}catch(e){console.error("Error fetching data:",e)}}function c(t){const e=document.createDocumentFragment();e.replaceChildren(),o.innerHTML="",t.forEach(n=>{const d=document.createElement("div");d.className="bg-blue-300 w-full sm:w-87.5 min-h-50 space-y-2 rounded-lg shadow-lg p-5 flex flex-col content-center border border-white/20";const u=document.createElement("h3");u.className="font-semibold text-lg text-center",u.textContent=n.institute_name;const w=document.createElement("p");w.textContent=`Institutes Type: ${n.institution_type}`;const p=document.createElement("p");p.textContent=`State: ${n.state}`;const f=document.createElement("p");f.textContent=`District: ${n.district}`;const E=document.createElement("p");E.textContent=`University: ${n.university}`;const a=document.createElement("p");a.textContent=`Address: ${n.address}`;const i=document.createElement("p");i.textContent=`Programme: ${n.programmes[0].programme}`,d.append(u,w,p,f,a,E,i),e.append(d)}),o.append(e)}m.addEventListener("change",function(){S(m.value)}),g.addEventListener("change",()=>{const t=g.value;if(t==="All")S(m.value),c(s);else{const e=s.filter(n=>n.district==t);c(e)}}),r.addEventListener("change",()=>{let t=r.value;if(t==="All")c(s);else{const e=s.filter(n=>n.institution_type===t);c(e)}}),l.addEventListener("change",()=>{let t=l.value;if(t==="All")c(s);else{const e=s.filter(n=>n.university===t);c(e)}}),v.addEventListener("change",()=>{let t=v.value;if(t=="All")c(s);else{const e=s.filter(n=>n.programmes.some(u=>u.programme===t));c(e)}}),A.addEventListener("click",O);const N=await D(x);console.log(N);async function D(t){try{const e=[];for(const n of t){const d=await fetch(`${C}/institutions/states/${n.name}`);if(!d.ok)throw new Error("Network response war not ok");const u=await d.json();e.push(...u.data)}return e}catch(e){console.error("Error fetching data:",e)}}function O(){const t=y.value.toUpperCase(),e=N.filter(n=>n.institute_name.includes(t));c(e)}});
