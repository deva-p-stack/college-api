(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))f(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&f(u)}).observe(document,{childList:!0,subtree:!0});function w(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function f(s){if(s.ep)return;s.ep=!0;const r=w(s);fetch(s.href,r)}})();document.addEventListener("DOMContentLoaded",async function(){const g=document.getElementById("district"),l=document.getElementById("search"),w=document.getElementById("search-btn"),f=document.getElementById("state"),s=document.getElementById("con"),r=document.getElementById("institution"),u=document.getElementById("University"),h=document.getElementById("programme"),A=document.getElementById("course-info"),T=document.getElementById("course-table"),D=document.getElementById("course-dialog-close-btn"),N="https://indian-colleges-list.vercel.app/api";let c=[];const C=await I();I(),k(C),D.addEventListener("click",()=>A.close());async function I(){try{const t=await fetch(`${N}/institutions/states`);if(!t.ok)throw new Error("Network response was not working");return(await t.json()).states}catch(t){console.error("Error fetching data:",t)}}function k(t){t.forEach(n=>{const e=document.createElement("option");e.textContent=`${n.name}`,e.value=n.name,e.className="text-[#E2E8F0] border-[#2E3A47] bg-[#202934]",f.append(e)})}async function B(t){try{const n=`https://indian-colleges-list.vercel.app/api/institutions/states/${t}`,e=await fetch(n);if(!e.ok)throw new Error("Network response was not ok");c=(await e.json()).data,d(c),g.innerHTML="";const a=[...new Set(c.map(i=>i.district))].sort();b(a,g),x("Districts",g),u.innerHTML="";const m=[...new Set(c.map(i=>i.university))].sort(),p=["NOT APPLICABLE","NONE","None","Self","SELF"],E=m.filter(i=>!p.includes(i));b(E,u),x("Universities",u),h.innerHTML="";const y=[...new Set(c.flatMap(i=>i.programmes.map(v=>v.programme)))].sort();b(y,h),x("Programmes",h)}catch(n){console.error("Error fetching data:",n)}}function b(t,n){t.forEach(e=>{const o=document.createElement("option");o.className="text-[#E2E8F0] border-[#2E3A47] bg-[#202934]",o.textContent=e,o.value=e,n.append(o)})}function x(t,n){const e=document.createElement("option");e.textContent=`All ${t}`,e.value="All",e.className="text-[#E2E8F0] border-[#2E3A47] bg-[#202934];",e.selected=!0,n.prepend(e)}function d(t){const n=document.createDocumentFragment();n.replaceChildren(),s.innerHTML="",t.forEach(e=>{const o=document.createElement("div");o.className="bg-[#0F1C2B] w-full sm:w-87.5 min-h-50 space-y-2 shadow-lg rounded-lg shadow-lg p-5 pb-10 flex flex-col content-center border border-white/20 relative";function a(P){return P.toLowerCase().split(" ").map(S=>S.charAt(0).toUpperCase()+S.slice(1)).join(" ")}const m=document.createElement("h3");m.className="font-semibold text-lg text-center text-slate-200 ",m.textContent=e.institute_name;const p=document.createElement("p");p.className="text-slate-100 pt-1",p.innerHTML=`University: <span class="font-semibold text-sky-400/80">${a(e.state)}</span>`;const E=document.createElement("p");E.innerHTML=`Institution: <span class="font-semibold text-sky-400/80">${a(e.institute_name)}</span>`,E.className="text-slate-100 ";const y=document.createElement("p");y.innerHTML=`State: <span class="font-semibold text-sky-400/80">${a(e.state)}</span>`,y.className="pt-2 text-slate-100";const i=document.createElement("p");i.innerHTML=`District: <span class="font-semibold text-sky-400/80"> ${a(e.district)}</span>`,i.className="pt-2 text-slate-100";const v=document.createElement("p");v.innerHTML=`Address: <span class="font-semibold text-sky-400/80">${a(e.address)}</span>`,v.className="pb-3 pt-2 text-slate-100";const L=document.createElement("button");L.className="absolute right-3 bottom-3 px-3 py-2 bg-slate-800/80 text-sky-400/80 active:scale-95 transition-all  border border-transparent hover:border-sky-400 hover:bg-transparent hover:-translate-y-0.5 duration-300 ease-in-out hover:bg-gray-700/70  rounded   cursor-pointer",L.textContent="View Courses",L.addEventListener("click",()=>H(e)),o.append(m,E,p,y,i,v,L),n.append(o)}),s.append(n)}f.addEventListener("change",function(){B(f.value)}),g.addEventListener("change",()=>{const t=g.value;if(t==="All")B(f.value),d(c);else{const n=c.filter(e=>e.district==t);d(n)}}),r.addEventListener("change",()=>{let t=r.value;if(t==="All")d(c);else{const n=c.filter(e=>e.institution_type===t);d(n)}}),u.addEventListener("change",()=>{let t=u.value;if(t==="All")d(c);else{const n=c.filter(e=>e.university===t);d(n)}}),h.addEventListener("change",()=>{let t=h.value;if(t=="All")d(c);else{const n=c.filter(e=>e.programmes.some(a=>a.programme===t));d(n)}}),w.addEventListener("click",$);const M=await O(C);M&&(l.readOnly=!1,l.title="now you can searchðŸ˜Š...",l.classList.replace("cursor-wait","cursor-text"),l.classList.add("outline","outline-green-600","scale-110"),setTimeout(()=>{l.classList.remove("outline","outline-green-600","scale-110")},3e3));async function O(t){try{const n=[];for(const e of t){const o=await fetch(`${N}/institutions/states/${e.name}`);if(!o.ok)throw new Error("Network response war not ok");const a=await o.json();n.push(...a.data)}return n}catch(n){console.error("Error fetching data:",n)}}function $(){const t=l.value.toUpperCase(),n=M.filter(e=>e.institute_name.includes(t));d(n)}function H(t){const n=t.programmes;T.innerHTML="",n.forEach(e=>{console.log(e);const o=document.createElement("tr"),a=document.createElement("td");a.textContent=e.course;const m=document.createElement("td");m.textContent=e.level;const p=document.createElement("td");p.textContent=e.programme;const E=document.createElement("td");E.textContent=e.availability,o.append(a,m,p,E),T.append(o)}),A.showModal()}});
