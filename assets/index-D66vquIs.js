(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))f(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&f(u)}).observe(document,{childList:!0,subtree:!0});function w(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function f(o){if(o.ep)return;o.ep=!0;const r=w(o);fetch(o.href,r)}})();document.addEventListener("DOMContentLoaded",async function(){const g=document.getElementById("district"),l=document.getElementById("search"),w=document.getElementById("search-btn"),f=document.getElementById("state"),o=document.getElementById("con"),r=document.getElementById("institution"),u=document.getElementById("University"),y=document.getElementById("programme"),b=document.getElementById("course-info"),A=document.getElementById("course-table"),S=document.getElementById("course-dialog-close-btn"),C="https://indian-colleges-list.vercel.app/api";let a=[];const N=await I();I(),D(N),S.addEventListener("click",()=>b.close());async function I(){try{const t=await fetch(`${C}/institutions/states`);if(!t.ok)throw new Error("Network response was not working");return(await t.json()).states}catch(t){console.error("Error fetching data:",t)}}function D(t){t.forEach(n=>{const e=document.createElement("option");e.textContent=`${n.name}`,e.value=n.name,e.className="text-[#E2E8F0] border-[#2E3A47] bg-[#202934]",f.append(e)})}async function T(t){try{const n=`https://indian-colleges-list.vercel.app/api/institutions/states/${t}`,e=await fetch(n);if(!e.ok)throw new Error("Network response was not ok");a=(await e.json()).data,d(a),g.innerHTML="";const c=[...new Set(a.map(i=>i.district))].sort();L(c,g),x("Districts",g),u.innerHTML="";const m=[...new Set(a.map(i=>i.university))].sort(),p=["NOT APPLICABLE","NONE","None","Self","SELF"],E=m.filter(i=>!p.includes(i));L(E,u),x("Universities",u),y.innerHTML="";const v=[...new Set(a.flatMap(i=>i.programmes.map(h=>h.programme)))].sort();L(v,y),x("Programmes",y)}catch(n){console.error("Error fetching data:",n)}}function L(t,n){t.forEach(e=>{const s=document.createElement("option");s.className="text-[#E2E8F0] border-[#2E3A47] bg-[#202934]",s.textContent=e,s.value=e,n.append(s)})}function x(t,n){const e=document.createElement("option");e.textContent=`All ${t}`,e.value="All",e.className="text-[#E2E8F0] border-[#2E3A47] bg-[#202934];",e.selected=!0,n.prepend(e)}function d(t){const n=document.createDocumentFragment();n.replaceChildren(),o.innerHTML="",t.forEach(e=>{const s=document.createElement("div");s.className="bg-[#0F1C2B] w-full sm:w-87.5 min-h-50 space-y-2 shadow-lg rounded-lg shadow-lg p-5 pb-10 flex flex-col content-center border border-white/20 relative";const c=document.createElement("h3");c.className="font-semibold text-lg text-center text-slate-200 ",c.textContent=e.institute_name;const m=document.createElement("p");m.textContent=`University: ${e.university}`,m.className="text-slate-400 pt-1";const p=document.createElement("p");p.textContent=`Institutes Type: ${e.institution_type}`,p.className="text-slate-400";const E=document.createElement("p");E.textContent=`State: ${e.state}`,E.className="pt-2 text-slate-400";const v=document.createElement("p");v.textContent=`District: ${e.district}`,v.className="pt-2 text-slate-400";const i=document.createElement("p");i.textContent=`Address: ${e.address}`,i.className="pb-3 pt-2 text-slate-400";const h=document.createElement("button");h.className="absolute right-3 bottom-3 px-3 py-2 bg-gray-800/90 text-white/90 active:scale-95 transition-all duration-300 ease-in-out hover:bg-gray-700/70  rounded   cursor-pointer",h.textContent="View Courses",h.addEventListener("click",()=>$(e)),s.append(c,p,m,E,v,i,h),n.append(s)}),o.append(n)}f.addEventListener("change",function(){T(f.value)}),g.addEventListener("change",()=>{const t=g.value;if(t==="All")T(f.value),d(a);else{const n=a.filter(e=>e.district==t);d(n)}}),r.addEventListener("change",()=>{let t=r.value;if(t==="All")d(a);else{const n=a.filter(e=>e.institution_type===t);d(n)}}),u.addEventListener("change",()=>{let t=u.value;if(t==="All")d(a);else{const n=a.filter(e=>e.university===t);d(n)}}),y.addEventListener("change",()=>{let t=y.value;if(t=="All")d(a);else{const n=a.filter(e=>e.programmes.some(c=>c.programme===t));d(n)}}),w.addEventListener("click",O);const B=await M(N);B&&(l.readOnly=!1,l.title="now you can searchðŸ˜Š...",l.classList.replace("cursor-wait","cursor-text"),l.classList.add("outline","outline-green-600","scale-110"),setTimeout(()=>{l.classList.remove("outline","outline-green-600","scale-110")},3e3));async function M(t){try{const n=[];for(const e of t){const s=await fetch(`${C}/institutions/states/${e.name}`);if(!s.ok)throw new Error("Network response war not ok");const c=await s.json();n.push(...c.data)}return n}catch(n){console.error("Error fetching data:",n)}}function O(){const t=l.value.toUpperCase(),n=B.filter(e=>e.institute_name.includes(t));d(n)}function $(t){const n=t.programmes;A.innerHTML="",n.forEach(e=>{console.log(e);const s=document.createElement("tr"),c=document.createElement("td");c.textContent=e.course;const m=document.createElement("td");m.textContent=e.level;const p=document.createElement("td");p.textContent=e.programme;const E=document.createElement("td");E.textContent=e.availability,s.append(c,m,p,E),A.append(s)}),b.showModal()}});
